import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{R as i,r as a}from"./index.DB02PGg6.js";import{g as n}from"./categoryLabels.CBjB4mnr.js";const l=i.memo(({post:t})=>{const s=a.useMemo(()=>new Date(t.createdAt).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),[t.createdAt]),o=a.useMemo(()=>n(t.categorie),[t.categorie]);return e.jsxs("div",{className:"grid grid-cols-7 gap-4 p-4 hover:bg-gray-50/10 transition-colors min-w-[800px]",children:[e.jsx("div",{className:"col-span-2",children:e.jsx("p",{className:"text-neutral-200 font-medium truncate",title:t.title,children:t.title})}),e.jsx("div",{children:e.jsx("p",{className:"text-neutral-200 text-sm",children:s})}),e.jsx("div",{children:e.jsx("p",{className:"text-neutral-200 text-sm bg-purple-400/10 border border-purple-400/60 px-2 py-1 rounded-full w-fit",children:o})}),e.jsx("div",{children:e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-semibold border ${t.status==="PUBLISHED"?"bg-green-500/10 text-green-500":"bg-gray-500/10 text-gray-500"}`,children:t.status==="PUBLISHED"?"Sí":"No"})}),e.jsx("div",{children:e.jsx("p",{className:"text-neutral-200 text-sm",children:t.views.toLocaleString()})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-blue-600/60 hover:text-neutral-200/60 text-sm font-medium cursor-pointer",onClick:()=>{localStorage.setItem("editPostId",t.id),localStorage.setItem("isLoadingPost","true"),window.location.href="/admin/crear-publicacion"},children:"Editar"}),e.jsx("button",{className:"text-red-600/60 hover:text-neutral-200/60 text-sm font-medium cursor-pointer",onClick:async()=>{if(confirm("¿Estás seguro de que quieres eliminar este post? Esta acción no se puede deshacer."))try{const r=await window.Clerk?.session?.getToken();if(!r){alert("No se pudo obtener el token de autenticación");return}if(!(await fetch(`https://blog-api-rrttqa.fly.dev/api/v1/posts/${t.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}})).ok)throw new Error("Error al eliminar el post");alert("Post eliminado exitosamente"),window.location.reload()}catch{alert("Error al eliminar el post")}},children:"Eliminar"})]})]})});l.displayName="PostItem";export{l as P};
