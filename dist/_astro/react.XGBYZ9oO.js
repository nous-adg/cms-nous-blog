import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.DB02PGg6.js";import"./PostItem.CBIGWHob.js";import"./categoryLabels.CBjB4mnr.js";function y(){const[o,d]=r.useState({published:0,draft:0,totalViews:0}),[a,x]=r.useState(!0),[b,h]=r.useState(null);return r.useEffect(()=>{const l="https://blog-api-rrttqa.fly.dev/api/v1";async function f(){try{const s=new AbortController,p=setTimeout(()=>s.abort(),5e3),c=await fetch(`${l}/posts?status=PUBLISHED`,{signal:s.signal}).catch(e=>(console.error("Fetch published error:",e),null)),g=c?.ok?await c.json():{total:0},n=await fetch(`${l}/posts?status=DRAFT`,{signal:s.signal}).catch(e=>(console.error("Fetch draft error:",e),null)),u=n?.ok?await n.json():{total:0},i=await fetch(`${l}/posts/stats/views`,{signal:s.signal}).catch(e=>(console.error("Fetch views error:",e),null)),m=i?.ok?await i.json():{totalViews:0};clearTimeout(p),d({published:g.total||0,draft:u.total||0,totalViews:m.totalViews||0})}catch(s){console.error("Error fetching stats:",s),h(s instanceof Error?s.message:"Unknown error")}finally{x(!1)}}f()},[]),t.jsx("section",{className:"container mx-auto max-w-12xl mt-10",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[t.jsxs("article",{className:"flex flex-col gap-2 rounded-lg glass p-4 border border-white/5",children:[t.jsx("h3",{className:"font-semibold text-gray-400",children:"Cantidad de vistas"}),t.jsx("p",{className:"text-3xl font-bold text-[var(--color-secondary)]",children:a?"...":o.totalViews.toLocaleString()})]}),t.jsxs("article",{className:"flex flex-col gap-2 rounded-lg glass p-4 border border-white/5",children:[t.jsx("h3",{className:"font-semibold text-gray-400",children:"Cantidad de suscriptores"}),t.jsx("p",{className:"text-3xl font-bold text-[var(--color-secondary)]",children:"32"})]}),t.jsxs("article",{className:"flex flex-col gap-2 rounded-lg glass p-4 border border-white/5",children:[t.jsx("h3",{className:"font-semibold text-gray-400",children:"Posts publicados"}),t.jsx("p",{className:"text-3xl font-bold text-[var(--color-secondary)]",children:a?"...":o.published})]}),t.jsxs("article",{className:"flex flex-col gap-2 rounded-lg glass p-4 border border-white/5",children:[t.jsx("h3",{className:"font-semibold text-gray-400",children:"Posts en borrador"}),t.jsx("p",{className:"text-3xl font-bold text-[var(--color-secondary)]",children:a?"...":o.draft})]})]})})}export{y as StatusCards};
