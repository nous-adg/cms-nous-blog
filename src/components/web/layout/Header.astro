---
import NavLinks from "../ui/NavLinks.astro";
import Button from "../ui/buttons/Button.astro";

const links = [
    { href: "/", label: "Inicio" },
    { href: "/areas-de-practica", label: "Áreas de práctica" },
    { href: "/sobre-mi", label: "Sobre mí" },
    { href: "/blog", label: "Blog" },
];

const currentPath = Astro.url.pathname;
---

<header
    class="fixed top-0 left-0 right-0 z-50 bg-primary has-[:checked]:shadow-lg"
>
    <input type="checkbox" id="menu-toggle" class="hidden" />

    <div
        class="container mx-auto px-3 sm:px-6 lg:px-9 text-secondary font-alexandria"
    >
        <div class="flex items-center justify-between py-4 md:py-5">
            <div class="flex items-center">
                <a href="/" class="text-lg sm:text-xl font-bold"
                    >{Astro.props.title}</a
                >
            </div>

            <div class="hidden lg:block">
                <NavLinks />
            </div>

            <div class="hidden lg:block">
                <Button
                    href="/contacto"
                    text="Contacto"
                    variant="primaryHeading"
                />
            </div>

            <label
                for="menu-toggle"
                class="lg:hidden cursor-pointer flex flex-col gap-1.5 w-6 z-50"
            >
                <span
                    class="block h-0.5 w-full bg-secondary transition-all duration-300 has-[:checked]:rotate-45 has-[:checked]:translate-y-2"
                ></span>
                <span
                    class="block h-0.5 w-full bg-secondary transition-all duration-300 has-[:checked]:opacity-0"
                ></span>
                <span
                    class="block h-0.5 w-full bg-secondary transition-all duration-300 has-[:checked]:-rotate-45 has-[:checked]:-translate-y-2"
                ></span>
            </label>
        </div>
    </div>

    <nav
        class="lg:hidden absolute top-full left-0 right-0 bg-primary transition-all duration-300 max-h-0 overflow-hidden has-[:checked]:max-h-screen"
    >
        <div class="container mx-auto px-3 sm:px-6 py-6 flex flex-col gap-4">
            {
                links.map((link) => {
                    const isActive = currentPath === link.href;
                    return (
                        <a
                            href={link.href}
                            class={`text-lg font-semibold py-2 border-l-4 pl-4 transition-all ${isActive ? "border-secondary-light text-secondary-light" : "border-transparent hover:border-secondary-light hover:text-secondary-light"}`}
                        >
                            {link.label}
                        </a>
                    );
                })
            }
            <div class="mt-2">
                <Button
                    href="/contacto"
                    text="Contacto"
                    variant="primaryHeading"
                />
            </div>
        </div>
    </nav>
</header>

<style>
    #menu-toggle:checked ~ div label span:nth-child(1) {
        transform: rotate(45deg) translate(5px, 6px);
    }
    #menu-toggle:checked ~ div label span:nth-child(2) {
        opacity: 0;
    }
    #menu-toggle:checked ~ div label span:nth-child(3) {
        transform: rotate(-45deg) translate(5px, -7px);
    }
    #menu-toggle:checked ~ nav {
        max-height: 100vh;
    }
</style>
