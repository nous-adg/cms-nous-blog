---
interface Props {
  searchValue?: string;
  totalResults?: number;
}

const { searchValue = '', totalResults } = Astro.props;
---

<!-- Barra de búsqueda -->
<div class="flex justify-center mb-6">
    <div class="relative w-full max-w-2xl">
        <input
            type="text"
            name="search"
            value={searchValue}
            placeholder="Buscar por título, contenido, categoría o etiquetas..."
            class="w-full pl-12 pr-24 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-secondary-light focus:border-transparent transition text-gray-700"
        />
        {searchValue && (
            <a
                href="/blog"
                class="absolute right-20 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition"
                title="Limpiar búsqueda"
            >
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </a>
        )}
        <button
            type="submit"
            class="absolute right-2 top-1/2 -translate-y-1/2 px-2 py-2 bg-secondary-light text-white rounded-full hover:bg-secondary transition font-medium text-sm cursor-pointer"
        >
            <svg 
                class="w-5 h-5 text-primary pointer-events-none" 
                fill="none" 
                viewBox="0 0 24 24" 
                stroke="currentColor"
            >
                <path 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    stroke-width="2" 
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" 
                />
            </svg>
        </button>
    </div>
</div>

<!-- Indicador de resultados -->
{searchValue && totalResults !== undefined && (
    <div class="mb-6 text-center">
        <p class="text-gray-600">
            {totalResults > 0 ? (
                <>
                    Se encontraron <span class="font-semibold text-secondary">{totalResults}</span>{' '}
                    {totalResults === 1 ? 'resultado' : 'resultados'} para{' '}
                    <span class="font-semibold text-secondary">"{searchValue}"</span>
                </>
            ) : (
                <>
                    No se encontraron resultados para{' '}
                    <span class="font-semibold text-secondary">"{searchValue}"</span>
                </>
            )}
        </p>
    </div>
)}
