---
interface Category {
  value: string;
  label: string;
}

interface Props {
  categories: Category[];
  selectedCategory?: string;
  selectedOrder?: string;
}

const { categories, selectedCategory = '', selectedOrder = 'newest' } = Astro.props;
---

<div class="flex flex-col sm:flex-row gap-4 mb-8 mt-12">
  <!-- Filtro de Categoría -->
  <div class="w-full sm:w-auto min-w-[200px]">
    <label for="category-filter" class="block text-sm font-semibold text-gray-700 mb-2">
      Categoría
    </label>
    <div class="relative">
      <select
        id="category-filter"
        name="category"
        class={`w-full bg-white border border-gray-300 rounded-full py-2.5 px-4 pr-10 appearance-none focus:outline-none focus:ring-2 focus:ring-secondary-light transition ${
          selectedCategory ? 'text-secondary font-medium' : 'text-gray-500'
        }`}
        onchange="this.form.submit()"
      >
        <option value="" selected={!selectedCategory}>Todas</option>
        {categories.map((category) => (
          <option value={category.value} selected={selectedCategory === category.value}>
            {category.label}
          </option>
        ))}
      </select>
      <!-- Icono de dropdown -->
      <svg
        class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </div>
  </div>

  <!-- Filtro de Orden (Tiempo) -->
  <div class="w-full sm:w-auto min-w-[200px]">
    <label for="order-filter" class="block text-sm font-semibold text-gray-700 mb-2">
      Tiempo
    </label>
    <div class="relative">
      <select
        id="order-filter"
        name="order"
        class={`w-full bg-white border border-gray-300 rounded-full py-2.5 px-4 pr-10 appearance-none focus:outline-none focus:ring-2 focus:ring-secondary-light transition ${
          selectedOrder !== 'newest' ? 'text-secondary font-medium' : 'text-gray-500'
        }`}
        onchange="this.form.submit()"
      >
        <option value="newest" selected={selectedOrder === 'newest'}>Más recientes</option>
        <option value="oldest" selected={selectedOrder === 'oldest'}>Más antiguos</option>
      </select>
      <!-- Icono de dropdown -->
      <svg
        class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </div>
  </div>

  <!-- Botón para limpiar filtros (solo si hay filtros activos) -->
  {(selectedCategory || selectedOrder !== 'newest') && (
    <div class="w-full sm:w-auto flex items-end">
      <a
        href="/blog"
        class="w-full sm:w-auto px-6 py-2.5 text-sm font-medium text-gray-600 hover:text-secondary-light border border-gray-300 rounded-full hover:border-secondary-light transition text-center"
      >
        Limpiar filtros
      </a>
    </div>
  )}
</div>
